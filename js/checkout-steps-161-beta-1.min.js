!function(e,t){"function"==typeof define&&define.amd?define([],t()):"object"==typeof exports?module.exports=t():e.CheckoutSteps=t()}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";function l(){var e={},t=!1,r=0;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],r++);r<arguments.length;r++){s=void 0;var s,o=arguments[r];for(s in o)o.hasOwnProperty(s)&&(t&&"[object Object]"===Object.prototype.toString.call(o[s])?e[s]=l(e[s],o[s]):e[s]=o[s])}return e}function B(){var e=document.querySelector(_.stepsWrapperSelector);return e?Array.from(e.querySelectorAll(_.stepSelector)):[]}function q(e){var t,r;e&&(r=e.querySelector(_.substepFieldsSelector),t=e.querySelector(_.substepTextSelector),CollapsibleBlock.collapse(r),CollapsibleBlock.expand(t),e.classList.remove(_.isEditingClass),(r=e.querySelector(_.substepEditButtonSelector))&&r.focus())}function E(e){L&&w(e).block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}function t(e,t){if(t&&t.fragments)for(var r in t.fragments){r=document.querySelector(r);r&&r.classList.remove(_.isLoadingClass)}}function r(e,t){b(),S()}function s(e,t){for(var r=document.querySelectorAll(_.substepSelector),s=0;s<r.length;s++){var o=r[s],l=o.querySelector(_.substepEditableStateFieldSelector),l=(l&&"no"===l.value?o.setAttribute(_.substepEditableStateAttribute,l.value):o.removeAttribute(_.substepEditableStateAttribute),o.querySelector(_.substepVisibleStateFieldSelector));l&&"no"===l.value?o.setAttribute(_.substepVisibleStateAttribute,l.value):o.removeAttribute(_.substepVisibleStateAttribute)}}function o(e){e.defaultPrevented||e.key!=n.ENTER&&e.key!=n.SPACE||!e.target.closest(_.substepEditButtonSelector)&&!e.target.closest(_.substepSaveButtonSelector)||f(e)}function c(){window.addEventListener("click",f),document.addEventListener("keydown",o,!0),L&&(w(document.body).on("updated_checkout",r),w(document.body).on("updated_checkout",s),w(document.body).on("updated_checkout",t)),document.body.classList.add(_.bodyClass),a=!0}var w=jQuery,L=null!=w,a=!1,i={},_={bodyClass:"has-fc-checkout-steps",bodyClassActiveStepPattern:"fc-checkout-step--active-{ID}",isMultistepLayout:"yes",maybeDisablePlaceOrderButton:"yes",wrapperSelector:".fc-wrapper",progressBarSelector:".fc-progress-bar",progressBarCurrentSelector:".fc-progress-bar__current-step",progressBarItemSelector:".fc-progress-bar__bar",stepsWrapperSelector:".fc-checkout-steps",stepSelector:".fc-checkout-step",currentStepSelector:"[data-step-current]",lastStepSelector:"[data-step-last]",nextStepSelector:"[data-step-current] ~ .fc-checkout-step",nextStepButtonSelector:"[data-step-next]",focusableElementsSelector:'a[role="button"], a[href], button:not([disabled]), input:not([disabled]):not([type="hidden"]), textarea:not([disabled]), select:not([disabled]), details, summary, iframe, object, embed, [contenteditable] [tabindex]:not([tabindex="-1"])',substepSelector:".fc-step__substep",substepTextContentSelector:".fc-step__substep-text-content",substepFieldsSelector:".fc-step__substep-fields",substepTextSelector:".fc-step__substep-text",substepEditButtonSelector:"[data-step-edit]",substepSaveButtonSelector:"[data-step-save]",expansibleSectionToggleSelector:"[data-expansible-section-toggle]",expansibleSectionExpandAttribute:"data-expansible-section-expand",expansibleSectionCollapseAttribute:"data-expansible-section-collapse",stepCompleteAttribute:"data-step-complete",stepCurrentAttribute:"data-step-current",stepIndexAttribute:"data-step-index",stepIdAttribute:"data-step-id",isEditingClass:"is-editing",isLoadingClass:"is-loading",isCurrentClass:"is-current",isCompleteClass:"is-complete",stepNextIncompleteClass:"fc-checkout-step--next-step-incomplete",currentStepClassTemplate:"fc-checkout-step-current--##STEP_ID##",substepEditableStateFieldSelector:'.fc-substep-editable-state[type="hidden"]',substepEditableStateAttribute:"data-substep-editable",substepVisibleStateFieldSelector:'.fc-substep-visible-state[type="hidden"]',substepVisibleStateAttribute:"data-substep-visible",invalidFieldRowSelector:".woocommerce-invalid .input-text, .woocommerce-invalid select",placeOrderButtonSelector:".fc-place-order-button",scrollOffsetSelector:".fc-checkout-header",scrollBehavior:"smooth",scrollOffset:0},n={ENTER:"Enter",SPACE:" "},u=function(e){var t,r;e&&(t=e.querySelector(_.substepFieldsSelector),r=e.querySelector(_.substepTextSelector),CollapsibleBlock.expand(t),CollapsibleBlock.collapse(r),e.classList.add(_.isEditingClass))},p=function(e){var t;e&&(window.CheckoutValidation&&!CheckoutValidation.validateAllFields(e)?(t=e.querySelector(_.invalidFieldRowSelector))&&t.focus():(q(e),L&&(t=e.querySelector(_.substepTextContentSelector),E(t),w(".woocommerce-error, .woocommerce-message").remove(),w(document.body).trigger("update_checkout"))))},d=function(e){if(e)if(window.CheckoutValidation&&!CheckoutValidation.validateAllFields(e))(l=e.querySelector(_.invalidFieldRowSelector))&&l.focus();else{e.setAttribute(_.stepCompleteAttribute,"");for(var t=e.querySelectorAll(_.substepSelector),r=0;r<t.length;r++){var s=t[r],o=s.querySelector(_.substepTextContentSelector);o&&(o.classList.add(_.isLoadingClass),E(o)),q(s)}for(var l=e.parentElement.querySelector(_.nextStepSelector),c=(l.setAttribute(_.stepCurrentAttribute,""),e.removeAttribute(_.stepCurrentAttribute),B()),a=c.indexOf(e),r=0;r<c.length;r++)r<a&&c[r].classList.remove(_.stepNextIncompleteClass);if(n=document.querySelector(_.currentStepSelector)){var i=parseInt(n.getAttribute(_.stepIndexAttribute)),i=isNaN(i)?-1:i,n=document.querySelector(_.progressBarSelector);if(n){for(var u=n.querySelectorAll(_.progressBarItemSelector),p=u.length,d=0;d<u.length;d++){var b=u[d],S=parseInt(b.getAttribute(_.stepIndexAttribute));(S=isNaN(S)?-1:S)==i?b.classList.add(_.isCurrentClass):b.classList.remove(_.isCurrentClass),S<=i?b.classList.add(_.isCompleteClass):b.classList.remove(_.isCompleteClass)}var f=(f=i+1)<=p?f:p,p=n.querySelector(_.progressBarCurrentSelector);p&&(p.innerText=f)}}var n=e,m=0,p=document.querySelector(_.progressBarSelector);if(p&&(m+=p.getBoundingClientRect().height),window.StickyStates){var y=document.querySelectorAll(_.scrollOffsetSelector);if(y&&0<y.length)for(var v=0;v<y.length;v++){var g=y[v];StickyStates.isStickyPosition(g)&&(m+=g.getBoundingClientRect().height)}}var C=function(e,t){for(var r=0;e&&(!t||t!=e);)r+=e.offsetTop,e=e.offsetParent;return r}(n)+-1*_.scrollOffset+-1*m;requestAnimationFrame(function(){window.scrollTo({top:C,behavior:_.scrollBehavior})});for(var h,A=null,x=Array.from((l||document).querySelectorAll(_.focusableElementsSelector)),r=0;r<x.length;r++){var k=x[r];if(!!((h=k).offsetWidth||h.offsetHeight||h.getClientRects().length)){A=k;break}}A&&A.focus(),L&&w(document.body).trigger("update_checkout")}},b=function(){if("yes"===_.maybeDisablePlaceOrderButton&&"yes"===_.isMultistepLayout){for(var e=B(),t=0;t<e.length;t++){var r=e[t].getAttribute(_.stepIdAttribute),s=_.currentStepClassTemplate.replace("##STEP_ID##",r);document.body.classList.remove(s)}var o=document.querySelector(_.currentStepSelector);o&&(r=o.getAttribute(_.stepIdAttribute),s=_.currentStepClassTemplate.replace("##STEP_ID##",r),document.body.classList.add(s))}},S=function(){if("yes"===_.maybeDisablePlaceOrderButton&&"yes"===_.isMultistepLayout){var e=document.querySelector(_.currentStepSelector),t=document.querySelector(_.lastStepSelector);if(e&&t)for(var r=e.getAttribute(_.stepIdAttribute)!==t.getAttribute(_.stepIdAttribute),s=document.querySelectorAll(_.placeOrderButtonSelector),o=0;o<s.length;o++)s[o].disabled=r}},f=function(e){var t,r;e.target.closest(_.nextStepButtonSelector)?(e.preventDefault(),t=e.target.closest(_.stepSelector),d(t)):e.target.closest(_.substepEditButtonSelector)?(e.preventDefault(),r=e.target.closest(_.substepSelector),u(r)):e.target.closest(_.substepSaveButtonSelector)&&(e.preventDefault(),r=e.target.closest(_.substepSelector),p(r))};return i.init=function(e){a||(_=l(_,e),window.CollapsibleBlock?c():window.RequireBundle&&RequireBundle.require(["collapsible-block"],function(){c()}))},i});
//# sourceMappingURL=maps/checkout-steps-161-beta-1.min.js.map
